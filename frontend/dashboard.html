<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>A2A Security Dashboard - Dashboard</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdn.jsdelivr.net/npm/d3@7/dist/d3.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js" defer></script>
    <script src="dashboard.js" defer></script>
  </head>
  <body>
    <div class="app-container" data-page="dashboard">
      <header class="app-header">
        <div class="logo">A2A SECURE</div>
        <nav class="main-nav">
          <a href="dashboard.html" class="nav-link active">Dashboard</a>
          <a href="agents/agents.html" class="nav-link">Agents</a>
          <a href="logs/logs.html" class="nav-link">Logs</a>
          <a href="ruleset/ruleset.html" class="nav-link">Ruleset</a>
        </nav>
      </header>

      <main class="content-area">
        <section id="dashboard" class="content-page active">
          <div class="dashboard-grid">
            <article class="widget widget-agent-graph">
              <div class="widget-header-with-button">
                <h3 class="widget-title">Agent Flow Graph</h3>
                <div class="widget-actions">
                  <span class="pill pill-live" id="flow-status">Syncingâ€¦</span>
                  <button class="btn-secondary" id="refresh-flow">Refresh</button>
                </div>
              </div>
              <div class="graph-container">
                <div id="graph-tooltip" class="graph-tooltip hidden"></div>
                <svg id="agent-flow-graph" role="presentation"></svg>
              </div>
            </article>

            <article class="widget widget-stats">
              <div class="widget-header-with-button">
                <h3 class="widget-title">Operational Overview</h3>
                <div class="widget-actions">
                  <button class="btn-secondary" id="refresh-dashboard">Refresh</button>
                </div>
              </div>
              <div class="stat-grid">
                <div class="stat-card">
                  <span class="label">Total Agents</span>
                  <span class="value" id="total-agents">0</span>
                </div>
                <div class="stat-card">
                  <span class="label">Total Rulesets</span>
                  <span class="value" id="total-rulesets">0</span>
                </div>
                <div class="stat-card">
                  <span class="label">Policy Violations (24h)</span>
                  <span class="value" id="total-violations">0</span>
                </div>
                <div class="stat-card">
                  <span class="label">Events Indexed</span>
                  <span class="value" id="total-events">0</span>
                </div>
              </div>
              <div class="risk-indicator" id="risk-indicator">
                <div class="risk-label">Risk Index</div>
                <div class="risk-value" id="risk-score">--</div>
                <div class="risk-bar">
                  <div class="risk-bar-fill" id="risk-bar-fill"></div>
                </div>
              </div>
            </article>

            <article class="widget widget-traffic-stats">
              <div class="widget-header-with-button">
                <h3 class="widget-title">Event Activity</h3>
                <div class="widget-actions">
                  <span class="pill" id="chart-range">Last 60 minutes</span>
                </div>
              </div>
              <canvas id="events-chart" height="220"></canvas>
            </article>

            <article class="widget widget-agent-status">
              <div class="widget-header-with-button">
                <h3 class="widget-title">Agent Health</h3>
                <div class="widget-actions">
                  <a class="btn-secondary" href="agents/agents.html">Manage Agents</a>
                </div>
              </div>
              <ul class="agent-status-list" id="agent-status-list"></ul>
            </article>

            <article class="widget widget-recent-logs">
              <div class="widget-header-with-button">
                <h3 class="widget-title">Recent Enforcement Logs</h3>
                <div class="widget-actions">
                  <a class="btn-primary" href="logs/logs.html">Open Log Explorer</a>
                </div>
              </div>
              <div class="log-list" id="dashboard-log-list"></div>
            </article>
          </div>
        </section>
      </main>
    </div>
  </body>
</html>
